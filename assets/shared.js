
const DEMO={projects:[{id:1,name:'ุณููุง ุงููุงุก',owner:'ุฌูุนูุฉ ุงูุจุฑ',start:'2026-01-01',end:'2026-06-30',progress:65,budget:300000,spent:280000,status:'ุฌุงุฑู',region:'ุงูุฑูุงุถ'}],
speakers:[{id:11,name:'ู. ุฃุญูุฏ',topic:'ุงูุฃูู ุงูุณูุจุฑุงูู',org:'ุดุฑูุฉ',status:'ุจุงูุชุธุงุฑ ุงูุชุญูู'}],
solutions:[{code:'S-01',title:'ููุตุฉ ุญููุงุช ุชุจุฑุน',for:'ุบูุฑ ุฑุจุญู',desc:'ุญููุงุช ูุฑุจุท ุงูุฏูุน ูุฎุงุฑุทุฉ ุงูุฃุซุฑ.'}],
facilities:[{id:11,provider:'ุฌุงูุนุฉ ุงูููู ุณุนูุฏ',name:'ูุงุนุฉ ุงููุคุชูุฑุงุช A',city:'ุงูุฑูุงุถ',capacity:300,status:'ูุชุงุญ'}],
trainers:[{id:21,name:'ุฏ. ุณุงุฑุฉ',topic:'ุชุญููู ุงูุจูุงูุงุช',mode:'ุนู ุจุนุฏ',rating:4.8}]};
const $=(s,r=document)=>r.querySelector(s), $$=(s,r=document)=>Array.from(r.querySelectorAll(s));
function buildSidebar(active){const isAcc=location.pathname.includes('/accounts/');const rel=isAcc?'..':'.';const side=document.createElement('aside');side.className='sidebar';
side.innerHTML=`<div class="flex items-center gap-3 mb-4"><img src="${rel}/assets/hasseef-logo.svg" width="40" height="40"><div><div class="font-extrabold">ููุตุฉ ุญุตูู</div><div class="text-xs text-slate-500">ุจูุงุจุฉ ุงูุชูุงูู</div></div></div>
<div class="text-xs text-slate-500 mb-2">ุงูุญุณุงุจุงุช</div>
<nav id="accountsNav" class="space-y-1">
<a class="sidebar-item" href="${rel}/accounts/gov.html" data-route="gov">ุงูุญูููุฉ</a>
<a class="sidebar-item" href="${rel}/accounts/emirate.html" data-route="emirate">ุงูุฅูุงุฑุฉ</a>
<a class="sidebar-item" href="${rel}/accounts/private.html" data-route="private">ุงููุทุงุน ุงูุฎุงุต</a>
<a class="sidebar-item" href="${rel}/accounts/nonprofit.html" data-route="nonprofit">ุบูุฑ ุงูุฑุจุญู</a>
<a class="sidebar-item" href="${rel}/accounts/university.html" data-route="university">ุงูุฌุงูุนุงุช</a>
<a class="sidebar-item" href="${rel}/accounts/individual.html" data-route="individual">ุงูุฃูุฑุงุฏ</a>
<a class="sidebar-item" href="${rel}/accounts/donor.html" data-route="donor">ุงููุงูุญูู</a>
<a class="sidebar-item" href="${rel}/accounts/partners.html" data-route="partners">ุงูุดุฑูุงุก ุงูุงุณุชุฑุงุชูุฌููู</a></nav>
<div class="text-xs text-slate-500 mt-6 mb-2">ุฑูุงุจุท ุนุงูุฉ</div>
<nav class="space-y-1"><a class="sidebar-item" href="${rel}/index.html">ุงูุฑุฆูุณูุฉ</a><a class="sidebar-item" href="${rel}/about.html">ุนู ุงูููุตุฉ</a><a class="sidebar-item" href="${rel}/privacy.html">ุงูุฎุตูุตูุฉ</a><a class="sidebar-item" href="${rel}/terms.html">ุงูุงุชูุงููุฉ</a></nav>
<div class="text-xs text-slate-400 mt-6">ยฉ ุญุตูู โ v21-final</div>`;
$$('#accountsNav a',side).forEach(a=>a.classList.toggle('active',a.dataset.route===active)); return side;}
function buildTopbar(title){const t=document.createElement('div');t.className='topbar';t.innerHTML=`<div class="px-4 py-3 flex items-center justify-between"><div class="text-sm text-slate-500">${title}</div>
<div class="flex items-center gap-2"><a href="../index.html" class="btn">ุงูุฑุฆูุณูุฉ</a></div></div>`;return t;}
function buildLayout(route,title){const c=document.createElement('div');c.className='layout';const m=document.createElement('main');m.id='pageMain';m.appendChild(buildTopbar(title));const s=document.createElement('section');s.id='app';s.className='space-y-3';m.appendChild(s);c.appendChild(m);c.appendChild(buildSidebar(route));document.body.prepend(c);return s;}
function makeTabs(root,tabs){const nav=document.createElement('div');nav.className='tabs';const area=document.createElement('div');const panels={};let i=0;for(const [label,html] of Object.entries(tabs)){const b=document.createElement('button');b.className='tab';b.textContent=label;b.addEventListener('click',()=>{nav.querySelectorAll('.tab').forEach(x=>x.classList.remove('active'));b.classList.add('active');for(const k in panels){panels[k].style.display=(k===label)?'block':'none';}});if(i===0)b.classList.add('active');nav.appendChild(b);const p=document.createElement('div');p.style.display=(i===0)?'block':'none';p.innerHTML=html;panels[label]=p;area.appendChild(p);i++;}root.appendChild(nav);root.appendChild(area);}
function panelProjects(){return `<div class="card"><div class="section-title">ุงููุดุงุฑูุน</div><div class="overflow-auto"><table id="projectsTable" class="interactive"><thead><tr><th>ุงููุดุฑูุน</th><th>ุงูุฌูุฉ</th><th>ุงููุฏุฉ</th><th>ุงูุญุงูุฉ</th></tr></thead><tbody>`+
DEMO.projects.map(p=>`<tr><td>${p.name}</td><td>${p.owner}</td><td>${p.start}โ${p.end}</td><td>${p.status}</td></tr>`).join('')+`</tbody></table></div></div>`;}
function panelSolutions(){return `<div class="card"><div class="section-title">ุณูู ุงูุญููู</div>`+DEMO.solutions.map(s=>`<div class="card"><b>${s.title}</b><div class="text-sm text-slate-600">${s.desc}</div></div>`).join('')+`</div>`;}
function panelPrinceRequest(){return `<div class="card"><div class="section-title">ุทูุจ ุฑุนุงูุฉ ุงูุฃููุฑ</div><button class="btn" onclick="openPrinceModal()">ูุชุญ ุงููููุฐุฌ</button></div>`;}
function panelFacilities(){return `<div class="card"><div class="section-title">ุงููุฑุงูู</div><div class="overflow-auto"><table class="interactive"><thead><tr><th>ุงููุฑูู</th><th>ุงููุฒูุฏ</th><th>ุงููุฏููุฉ</th><th>ุงูุณุนุฉ</th></tr></thead><tbody>`+
DEMO.facilities.map(f=>`<tr><td>${f.name}</td><td>${f.provider}</td><td>${f.city}</td><td>${f.capacity}</td></tr>`).join('')+`</tbody></table></div></div>`;}
function panelConsultations(){return `<div class="card"><div class="section-title">ุงูุงุณุชุดุงุฑุงุช</div><button class="btn" onclick="openFilePicker()">ุทูุจ ุงุณุชุดุงุฑุฉ</button></div>`;}
function panelWallet(t){return `<div class="card"><div class="section-title">`+t+`</div><div class="kpi"><b>ุฅุฌูุงูู ุงูุญุงูุธุฉ:</b> 6.4M</div></div>`;}
function panelAI(){return `<div class="card"><div class="section-title">ุงููุณุชุดุงุฑ ุงูุฐูู</div><textarea class="search" rows="3" placeholder="ุงูุชุจ ุณุคุงูู..."></textarea><div class="mt-2"><button class="btn btn-accent">ุชุญููู</button></div></div>`;}
function panelJobs(){return `<div class="card"><div class="section-title">ุงููุธุงุฆู/ุงูุชุฏุฑูุจ/ุงูุชุทูุน</div><button class="btn btn-accent">ุชูุฏูู</button></div>`;}
function panelTrainers(){return `<div class="card"><div class="section-title">ุงููุฏุฑุจูู ูุงููุชุญุฏุซูู</div><div class="overflow-auto"><table class="interactive"><thead><tr><th>ุงูุงุณู</th><th>ุงููุฌุงู</th><th>ุงูููุท</th><th>ุงูุชูููู</th></tr></thead><tbody>`+
DEMO.trainers.map(t=>`<tr><td>${t.name}</td><td>${t.topic}</td><td>${t.mode}</td><td>${t.rating}</td></tr>`).join('')+`</tbody></table></div></div>`;}
const ACCOUNT_TABS={gov:{title:'ุญุณุงุจ ุงูุญูููุฉ',tabs:{'๐ ุงููุดุงุฑูุน':panelProjects(),'๐งฉ ุณูู ุงูุญููู':panelSolutions(),'๐ฏ ูุฑุต ุงูุฑุนุงูุฉ (ุทูุจ ุงูุฃููุฑ)':panelPrinceRequest(),'๐๏ธ ุงููุฑุงูู ูุงููุนุงููุงุช':panelFacilities(),'๐ก ุงูุงุณุชุดุงุฑุงุช':panelConsultations(),'๐ฐ ุงููุญูุธุฉ':panelWallet('ูุญูุธุฉ ุญููููุฉ'),'๐ค ุงูุฐูุงุก ุงูุงุตุทูุงุนู':panelAI(),'๐ ุงููุคุดุฑุงุช ูุงูุชูุงุฑูุฑ':panelProjects()}},
emirate:{title:'ุญุณุงุจ ุงูุฅูุงุฑุฉ',tabs:{'๐ฏ ูุฑุงุฌุนุฉ ุฑุนุงูุฉ ุงูุฃููุฑ':panelPrinceRequest(),'๐ก๏ธ ุงููุณุญ ุงูุฃููู ูููุชุญุฏุซูู':panelTrainers(),'๐ ุงููุดุงุฑูุน':panelProjects(),'๐ฐ ุงููุญูุธุฉ':panelWallet('ูุญูุธุฉ ุงูุฅูุงุฑุฉ'),'๐ค ุงูุฐูุงุก ุงูุงุตุทูุงุนู':panelAI(),'๐ ุงููุคุดุฑุงุช ูุงูุชูุงุฑูุฑ':panelProjects()}},
private:{title:'ุญุณุงุจ ุงููุทุงุน ุงูุฎุงุต',tabs:{'๐งฉ ุณูู ุงูุญููู':panelSolutions(),'๐ค ูุฑุต CSR ุงููุทููุฉ':panelPrinceRequest(),'๐๏ธ ุงููุฑุงูู ูุงููุนุงููุงุช':panelFacilities(),'๐ก ุงูุงุณุชุดุงุฑุงุช':panelConsultations(),'๐ณ ูุญูุธุฉ CSR':panelWallet('ูุญูุธุฉ CSR'),'๐งโ๐ผ ุงููุธุงุฆู/ุงูุชุฏุฑูุจ/ุงูุชุทูุน':panelJobs(),'๐ค ุงููุฏุฑุจูู ูุงููุชุญุฏุซูู':panelTrainers(),'๐ค ุงูุฐูุงุก ุงูุงุตุทูุงุนู':panelAI(),'๐ ุงููุคุดุฑุงุช ูุงูุชูุงุฑูุฑ':panelProjects()}},
nonprofit:{title:'ุญุณุงุจ ุงููุทุงุน ุบูุฑ ุงูุฑุจุญู',tabs:{'๐ ุงููุดุงุฑูุน/ุงูุญููุงุช':panelProjects(),'๐งฉ ุณูู ุงูุญููู':panelSolutions(),'๐ฏ ูุฑุต ุงูุฑุนุงูุฉ (ุทูุจ ุงูุฃููุฑ)':panelPrinceRequest(),'๐ค ุงูุชุทูุน':panelJobs(),'๐ก ุงูุงุณุชุดุงุฑุงุช':panelConsultations(),'๐ฐ ุงููุญูุธุฉ':panelWallet('ูุญูุธุฉ ุงูุฌูุนูุงุช'),'๐ค ุงูุฐูุงุก ุงูุงุตุทูุงุนู':panelAI(),'๐ ุงููุคุดุฑุงุช ูุงูุชูุงุฑูุฑ':panelProjects()}},
university:{title:'ุญุณุงุจ ุงูุฌุงูุนุงุช',tabs:{'๐ ุงูุชุฏุฑูุจ ุงูุชุนุงููู':panelJobs(),'๐งฉ ุณูู ุงูุญููู':panelSolutions(),'๐๏ธ ุงููุฑุงูู ูุงููุนุงููุงุช':panelFacilities(),'๐ ุงูุญุงุถูุงุช/ุงููุณุฑุนุงุช':panelConsultations(),'๐ฏ ูุฑุต ุงูุฑุนุงูุฉ (ุทูุจ ุงูุฃููุฑ)':panelPrinceRequest(),'๐ณ ุงููุญูุธุฉ ุงูุจุญุซูุฉ':panelWallet('ูุญูุธุฉ ุงูุจุญูุซ'),'๐ก ุงูุงุณุชุดุงุฑุงุช':panelConsultations(),'๐ค ุงูุฐูุงุก ุงูุงุตุทูุงุนู':panelAI(),'๐ ุงููุคุดุฑุงุช ูุงูุชูุงุฑูุฑ':panelProjects()}},
individual:{title:'ุญุณุงุจ ุงูุฃูุฑุงุฏ',tabs:{'๐งญ ุชุญุฏูุฏ ุงููููู ูุงูุฑุบุจุงุช':panelAI(),'๐งโ๐ผ ุงููุธุงุฆู/ุงูุชุฏุฑูุจ/ุงูุชุทูุน':panelJobs(),'๐ค ุงูุชูุฏูู ููุชุญุฏุซ/ูุฏุฑุจ':panelTrainers(),'๐ก ุงูุงุณุชุดุงุฑุงุช':panelConsultations(),'๐ณ ุงููุญูุธุฉ ุงูุดุฎุตูุฉ':panelWallet('ูุญูุธุฉ ุดุฎุตูุฉ'),'๐ค ุงููุณุชุดุงุฑ ุงูุฐูู':panelAI()}},
donor:{title:'ุญุณุงุจ ุงููุงูุญูู',tabs:{'๐ ุจุฑุงูุฌ ุงูููุญ':panelConsultations(),'๐ฏ ุฑุนุงูุฉ ุงููุจุงุฏุฑุงุช (ุทูุจ ุงูุฃููุฑ)':panelPrinceRequest(),'๐ณ ูุญูุธุฉ ุงูููุญ':panelWallet('ูุญูุธุฉ ุงูููุญ'),'๐ ุชูุงุฑูุฑ ุงูุฃุซุฑ':panelProjects(),'๐ค ุงูุฐูุงุก ุงูุงุตุทูุงุนู':panelAI()}},
partners:{title:'ุญุณุงุจ ุงูุดุฑูุงุก ุงูุงุณุชุฑุงุชูุฌููู',tabs:{'ููุธูุฑ ุงูุดุฑูู':panelProjects()}}};
function bootAccount(slug){const conf=ACCOUNT_TABS[slug];const content=buildLayout(slug,conf.title);const host=document.createElement('div');host.className='card';host.innerHTML=`<div class="section-title"> ${conf.title}</div><div id="tabs"></div>`;content.appendChild(host);makeTabs($('#tabs',host),conf.tabs);}
function openPrinceModal(){const m=document.getElementById('princeModal'); if(m) m.style.display='flex';}
function closePrinceModal(){const m=document.getElementById('princeModal'); if(m) m.style.display='none';}
function openFilePicker(){document.getElementById('filePicker')?.click();}
